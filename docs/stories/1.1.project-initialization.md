# Story 1.1: Project Initialization & Repository Setup

## Status

**Draft**

---

## Story

**As a** developer,  
**I want** a properly initialized Next.js TypeScript project with Git repository and CI/CD pipeline,  
**so that** the team has a consistent development environment and automated deployment.

---

## Acceptance Criteria

1. Next.js 14+ project initialized with TypeScript, Tailwind CSS, and App Router configuration
2. Git repository created with .gitignore configured for Next.js, node_modules, and environment variables
3. Project includes README.md with setup instructions, technology stack description, and development commands
4. Package.json configured with scripts for dev, build, test, and lint
5. ESLint and Prettier configured for code quality and consistent formatting
6. Vercel project created and linked to Git repository with automatic deployments on push to main branch
7. Environment variable structure documented (.env.example file) for Supabase keys and API URLs
8. Project successfully builds locally (pnpm run build) and deploys to Vercel showing default Next.js page

---

## Tasks / Subtasks

- [ ] **Task 1: Initialize Next.js Project** (AC: 1)
  - [ ] Run `npx create-next-app@latest hr-masterdata --typescript --tailwind --app --use-pnpm`
  - [ ] Verify App Router is enabled (src/app directory structure)
  - [ ] Confirm TypeScript configuration is present (tsconfig.json with strict mode)
  - [ ] Verify Tailwind CSS configuration exists (tailwind.config.ts, globals.css)
  - [ ] Test local dev server: `pnpm dev` and verify default Next.js page loads at http://localhost:3000

- [ ] **Task 2: Configure Git Repository** (AC: 2)
  - [ ] Initialize git repository: `git init`
  - [ ] Verify .gitignore includes: node_modules/, .next/, .env.local, .vercel/
  - [ ] Create initial commit with default Next.js structure
  - [ ] Create remote repository on GitHub (or similar)
  - [ ] Push initial commit to remote main branch

- [ ] **Task 3: Configure Package Scripts and Dependencies** (AC: 4)
  - [ ] Add scripts to package.json: `"dev"`, `"build"`, `"start"`, `"lint"`, `"test"`, `"type-check"`
  - [ ] Add `"type-check": "tsc --noEmit"` script for TypeScript validation
  - [ ] Install Vitest for testing: `pnpm add -D vitest @vitejs/plugin-react`
  - [ ] Create vitest.config.ts with React plugin configuration
  - [ ] Verify all scripts execute without errors

- [ ] **Task 4: Configure ESLint and Prettier** (AC: 5)
  - [ ] Verify ESLint is configured (next/core-web-vitals preset from create-next-app)
  - [ ] Install Prettier: `pnpm add -D prettier`
  - [ ] Create .prettierrc file with project formatting rules (semi: true, singleQuote: true, etc.)
  - [ ] Add Prettier script to package.json: `"format": "prettier --write ."`
  - [ ] Add .prettierignore (exclude .next/, node_modules/)
  - [ ] Run `pnpm lint` and `pnpm format` to verify configuration

- [ ] **Task 5: Create Environment Variable Template** (AC: 7)
  - [ ] Create .env.example file with required variables:
    - `NEXT_PUBLIC_SUPABASE_URL=`
    - `NEXT_PUBLIC_SUPABASE_ANON_KEY=`
    - `SUPABASE_SERVICE_ROLE_KEY=`
    - `NEXT_PUBLIC_APP_URL=`
  - [ ] Add comments explaining each variable's purpose
  - [ ] Document in README.md how to copy .env.example to .env.local

- [ ] **Task 6: Create Comprehensive README.md** (AC: 3)
  - [ ] Add project title: "HR Masterdata Management System"
  - [ ] Add project description and goals (from PRD)
  - [ ] Add "Technology Stack" section listing all technologies from tech-stack.md
  - [ ] Add "Setup Instructions" section with prerequisites and step-by-step local setup
  - [ ] Add "Development Commands" section documenting all package.json scripts
  - [ ] Add "Project Structure" section briefly describing folder organization
  - [ ] Add "Deployment" section (placeholder for Vercel URL, will be updated in Task 8)

- [ ] **Task 7: Build and Test Locally** (AC: 8, first part)
  - [ ] Run `pnpm install` to ensure all dependencies are installed
  - [ ] Run `pnpm type-check` and verify no TypeScript errors
  - [ ] Run `pnpm lint` and fix any linting issues
  - [ ] Run `pnpm build` and verify successful production build
  - [ ] Run `pnpm start` and verify production server runs correctly
  - [ ] Access http://localhost:3000 and confirm default Next.js page displays

- [ ] **Task 8: Deploy to Vercel** (AC: 6, 8)
  - [ ] Create Vercel account (if not exists) and install Vercel CLI: `pnpm add -g vercel`
  - [ ] Link project to Vercel: `vercel link`
  - [ ] Configure Vercel project settings: Framework Preset = Next.js, Build Command = `pnpm build`, Output Directory = .next
  - [ ] Connect Vercel project to GitHub repository for automatic deployments
  - [ ] Configure deployment branch: main branch triggers production deployments
  - [ ] Push code to main branch and verify automatic deployment triggers
  - [ ] Access production URL and verify default Next.js page displays correctly
  - [ ] Update README.md with production URL

- [ ] **Task 9: Verify CI/CD Pipeline** (AC: 6)
  - [ ] Make a small change (e.g., update README.md)
  - [ ] Commit and push to main branch
  - [ ] Verify Vercel automatically detects push and triggers build
  - [ ] Confirm deployment succeeds and production URL updates
  - [ ] Document CI/CD process in README.md

---

## Dev Notes

### Project Structure Overview
[Source: architecture/unified-project-structure.md]

The project follows Next.js 14+ App Router structure with the following key directories:

```
hr-masterdata/
  src/
    app/              # Next.js App Router (routes and pages)
    components/       # React components
      ui/            # shadcn/ui base components
    lib/              # Shared libraries
      types/         # TypeScript type definitions
      services/      # Frontend API services
      server/        # Server-only code
      utils/         # Utility functions
      supabase/      # Supabase clients
  public/             # Static assets
  supabase/           # Supabase configuration and migrations
  tests/              # Test files (unit, integration, e2e)
  .env.local.example  # Environment variable template
  next.config.js      # Next.js configuration
  tailwind.config.ts  # Tailwind configuration
  tsconfig.json       # TypeScript configuration
  package.json        # Dependencies and scripts
  vitest.config.ts    # Test configuration
```

### Technology Stack
[Source: architecture/tech-stack.md]

**Core Technologies:**
- **Next.js 14.1+** - Meta framework with App Router, API routes, SSR/SSG
- **TypeScript 5.3+** - Type-safe development (strict mode enabled)
- **React 18.2+** - UI component library
- **Tailwind CSS 3.4+** - Utility-first styling
- **pnpm 8.14+** - Package manager (faster than npm, efficient disk usage)

**Build & Dev Tools:**
- **Turbopack** - Next.js 14+ bundler (10x faster than Webpack in dev mode)
- **ESLint 8.56+** - Code linting with Next.js config
- **Prettier 3.1+** - Code formatting
- **Vitest 1.1+** - Testing framework (Jest-compatible, fast)

**Deployment:**
- **Vercel** - Frontend/backend hosting platform (free tier)
- **GitHub Actions** - CI/CD automation (optional for MVP, Vercel auto-deploy is primary)

### TypeScript Configuration
[Source: architecture/coding-standards.md]

TypeScript strict mode MUST be enabled. Key tsconfig.json settings:

```json
{
  "compilerOptions": {
    "strict": true,
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "module": "esnext",
    "moduleResolution": "bundler",
    "jsx": "preserve",
    "incremental": true,
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

### Package.json Scripts
[Source: architecture/development-workflow.md]

Required scripts for development workflow:

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit",
    "test": "vitest",
    "test:watch": "vitest watch",
    "format": "prettier --write ."
  }
}
```

### Environment Variables
[Source: architecture/development-workflow.md]

Required environment variables for .env.local.example:

```bash
# Frontend (publicly accessible)
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>

# Backend (server-side only)
SUPABASE_SERVICE_ROLE_KEY=<your-service-role-key>

# Optional
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development
```

**Note:** Actual values will be populated in Story 1.2 when Supabase project is created. For now, create template with placeholder comments.

### Deployment Configuration
[Source: architecture/deployment-architecture.md]

**Vercel Deployment Settings:**
- **Framework Preset:** Next.js
- **Build Command:** `pnpm build`
- **Output Directory:** `.next`
- **Install Command:** `pnpm install --frozen-lockfile`
- **Deployment Trigger:** Push to main branch (automatic)
- **Environment Variables:** Will be configured in Vercel dashboard after Supabase setup

**Deployment Process:**
1. Developer pushes code to GitHub main branch
2. Vercel detects push via GitHub webhook
3. Vercel runs `pnpm install` and `pnpm build`
4. Vercel deploys to edge network
5. Preview URL generated (production URL for main branch)

### Git Configuration
[Source: architecture/unified-project-structure.md]

Essential .gitignore entries (verify included by create-next-app):

```
# Dependencies
node_modules/
.pnp
.pnp.js

# Build output
.next/
out/
build/
dist/

# Environment variables
.env
.env.local
.env.*.local

# Testing
coverage/

# Vercel
.vercel/

# OS
.DS_Store
Thumbs.db
```

### ESLint Configuration
[Source: architecture/coding-standards.md]

Default Next.js ESLint configuration is sufficient for MVP. Verify .eslintrc.json contains:

```json
{
  "extends": "next/core-web-vitals"
}
```

This includes React hooks rules, TypeScript support, and Next.js best practices.

### Prettier Configuration
[Source: architecture/coding-standards.md]

Create .prettierrc with project standards:

```json
{
  "semi": true,
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "printWidth": 80
}
```

### Coding Standards Reference
[Source: architecture/coding-standards.md]

Key naming conventions to follow:
- **Components:** PascalCase (e.g., EmployeeTable.tsx)
- **Hooks:** camelCase with 'use' prefix (e.g., useAuth.ts)
- **Files:** kebab-case for non-components (e.g., employee-service.ts)
- **API Routes:** kebab-case (e.g., /api/employees)
- **Constants:** UPPER_SNAKE_CASE (e.g., MAX_FILE_SIZE)

### Testing Framework Setup
[Source: architecture/testing-strategy.md]

**Vitest Configuration:**
Create vitest.config.ts:

```typescript
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
});
```

**Required Dev Dependencies:**
```bash
pnpm add -D vitest @vitejs/plugin-react @testing-library/react @testing-library/jest-dom jsdom
```

### README.md Content Structure

**Required Sections:**
1. **Project Title & Description** - HR Masterdata Management System overview
2. **Features** - Brief bullet list of core capabilities (from PRD goals)
3. **Technology Stack** - Link to tech-stack.md or summarize key technologies
4. **Prerequisites** - Node.js 18.17+, pnpm 8.14+, Git
5. **Setup Instructions** - Step-by-step local development setup
6. **Development Commands** - Document all package.json scripts
7. **Project Structure** - Brief overview of folder organization
8. **Deployment** - Link to production URL (to be added after Task 8)
9. **License** - Optional (MIT or proprietary)

### Previous Story Context

**No previous story exists** - This is Story 1.1, the first story in Epic 1. No prior implementation context to reference.

### Project Structure Notes

The unified project structure defined in architecture/unified-project-structure.md must be followed. Key points:
- Use `src/app/` for App Router pages and API routes (Next.js 14 default)
- Use `src/components/` for React components, organized by feature
- Use `src/lib/` for shared code (types, services, utils)
- Use `supabase/` directory for database migrations (will be created in Story 1.2)
- Use `tests/` directory for all test files

**Note:** Some subdirectories (e.g., `src/app/api/`, `src/components/ui/`) will be created in later stories. This story focuses on foundational project setup only.

---

## Testing

### Testing Standards
[Source: architecture/testing-strategy.md]

**Test Coverage Goals:**
- Overall: 70%+
- Business logic: 90%+
- Critical paths must have tests

**Test Organization:**
- Unit tests: `tests/unit/`
- Integration tests: `tests/integration/`
- E2E tests: `tests/e2e/` (post-MVP)

**Testing Frameworks:**
- **Vitest** - Primary test runner (Jest-compatible, faster)
- **React Testing Library** - Component testing
- **@testing-library/jest-dom** - DOM assertion matchers

**For This Story (1.1):**

Since this story is infrastructure setup, testing focuses on **build verification** rather than unit tests:

1. **Type Checking:** Run `pnpm type-check` - must pass with zero errors
2. **Linting:** Run `pnpm lint` - must pass with zero errors
3. **Build:** Run `pnpm build` - must complete successfully
4. **Production Server:** Run `pnpm start` after build - server must start without errors
5. **Deployment:** Verify Vercel deployment succeeds and production URL is accessible

**Optional:** Create a simple smoke test file `tests/unit/setup.test.ts`:

```typescript
import { describe, it, expect } from 'vitest';

describe('Project Setup', () => {
  it('should have correct Node environment', () => {
    expect(process.env.NODE_ENV).toBeDefined();
  });

  it('should perform basic arithmetic', () => {
    expect(2 + 2).toBe(4);
  });
});
```

Run with `pnpm test` to verify Vitest is configured correctly.

**Test File Locations:**
[Source: architecture/testing-strategy.md]
- Place setup test in `tests/unit/setup.test.ts`
- Future component tests go in `tests/unit/components/`
- Future API tests go in `tests/integration/api/`

---

## Change Log

| Date       | Version | Description                 | Author |
| ---------- | ------- | --------------------------- | ------ |
| 2025-10-26 | 0.1     | Initial story draft created | Bob SM |

---

## Dev Agent Record

_This section will be populated by the development agent during implementation._

### Agent Model Used

_To be completed by Dev Agent_

### Debug Log References

_To be completed by Dev Agent_

### Completion Notes

_To be completed by Dev Agent_

### File List

_To be completed by Dev Agent_

---

## QA Results

_To be completed by QA Agent_
