# =============================================================================
# HR Masterdata Management System - Environment Variables
# =============================================================================
#
# This file contains all environment variables required for the application.
# Copy this file to .env.local and replace placeholder values with actual values.
#
# SECURITY WARNING:
# - Never commit .env.local to version control
# - Keep SUPABASE_SERVICE_ROLE_KEY secret (server-side only)
# - Share credentials securely (never via email or chat)
#
# =============================================================================

# -----------------------------------------------------------------------------
# Supabase Configuration
# -----------------------------------------------------------------------------
# Get these values from your Supabase project dashboard
# URL: https://supabase.com/dashboard
#
# Navigation: Select your project > Settings > API
#
# For production: Create a separate Supabase project for prod environment
# -----------------------------------------------------------------------------

# NEXT_PUBLIC_SUPABASE_URL
# Description: Supabase project API URL (public, exposed to browser)
# Found in: Project Settings > API > Project URL
# Format: https://your-project-id.supabase.co
# Example: https://abcdefghijklmnop.supabase.co
# Required: Yes
# Environment: All (development, staging, production)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# NEXT_PUBLIC_SUPABASE_ANON_KEY
# Description: Supabase anonymous/public API key (public, exposed to browser)
# Purpose: Used for client-side Supabase operations (authentication, RLS queries)
# Found in: Project Settings > API > Project API keys > anon/public
# Format: Long alphanumeric string (JWT token)
# Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMjUwMDAwMCwiZXhwIjoxOTQ4MDc2MDAwfQ.1234567890abcdefghijklmnopqrstuvwxyz
# Required: Yes
# Environment: All (development, staging, production)
# Security: Safe to expose in browser (RLS policies protect data)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# SUPABASE_SERVICE_ROLE_KEY
# Description: Supabase service role key (secret, server-side only)
# Purpose: Used for admin operations that bypass RLS (user creation, admin queries)
# Found in: Project Settings > API > Project API keys > service_role
# Format: Long alphanumeric string (JWT token)
# Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjMyNTAwMDAwLCJleHAiOjE5NDgwNzYwMDB9.9876543210zyxwvutsrqponmlkjihgfedcba
# Required: Yes
# Environment: All (development, staging, production)
# Security: NEVER expose to browser or commit to Git
# Warning: This key has full database access - treat like root password
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------

# NEXT_PUBLIC_APP_URL
# Description: Base URL for the application (used for redirects, emails, OAuth callbacks)
# Format: Full URL with protocol (http:// or https://)
# Examples:
#   Development: http://localhost:3000
#   Production: https://hr-masterdata.vercel.app
# Required: Yes
# Environment: All (development, staging, production)
# Note: Must match actual deployment URL in production
NEXT_PUBLIC_APP_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Environment Configuration
# -----------------------------------------------------------------------------

# NODE_ENV
# Description: Node.js environment mode
# Allowed values: development, production, test
# Purpose: Controls logging, error handling, and optimization
# Required: Yes (auto-set by Next.js in most cases)
# Default: development (if not set)
# Note: Vercel automatically sets this to "production" for production builds
NODE_ENV=development

# -----------------------------------------------------------------------------
# Optional Environment Variables
# -----------------------------------------------------------------------------
# These variables are optional and have sensible defaults

# NEXT_PUBLIC_ENABLE_ANALYTICS
# Description: Enable Vercel Analytics (post-MVP feature)
# Allowed values: true, false
# Default: false
# Required: No
# NEXT_PUBLIC_ENABLE_ANALYTICS=false

# NEXT_PUBLIC_SENTRY_DSN
# Description: Sentry error tracking DSN (post-MVP feature)
# Format: https://abc123@o123456.ingest.sentry.io/1234567
# Required: No
# NEXT_PUBLIC_SENTRY_DSN=

# LOG_LEVEL
# Description: Server-side logging verbosity
# Allowed values: debug, info, warn, error
# Default: info
# Required: No
# LOG_LEVEL=info

# SESSION_TIMEOUT_HOURS
# Description: User session timeout in hours
# Default: 8 (8 hours as per PRD requirement)
# Required: No
# SESSION_TIMEOUT_HOURS=8

# -----------------------------------------------------------------------------
# Setup Instructions
# -----------------------------------------------------------------------------
#
# 1. Copy this file:
#    cp .env.example .env.local
#
# 2. Create Supabase project:
#    - Go to https://supabase.com/dashboard
#    - Click "New Project"
#    - Fill in project details (name, password, region)
#    - Wait for provisioning (~2 minutes)
#
# 3. Get Supabase credentials:
#    - Navigate to Project Settings > API
#    - Copy "Project URL" → NEXT_PUBLIC_SUPABASE_URL
#    - Copy "anon/public" key → NEXT_PUBLIC_SUPABASE_ANON_KEY
#    - Copy "service_role" key → SUPABASE_SERVICE_ROLE_KEY
#
# 4. Update .env.local:
#    - Replace all placeholder values with actual credentials
#    - Update NEXT_PUBLIC_APP_URL for production deployment
#
# 5. Run database migrations:
#    - See README.md > Setup Instructions > Run Database Migrations
#
# 6. Verify setup:
#    - Run: pnpm dev
#    - Visit: http://localhost:3000
#    - Check: /api/health endpoint returns 200 OK
#
# -----------------------------------------------------------------------------
# Troubleshooting
# -----------------------------------------------------------------------------
#
# "Invalid Supabase URL" error:
# - Ensure NEXT_PUBLIC_SUPABASE_URL includes https:// protocol
# - Verify URL matches Supabase dashboard exactly
#
# "Authentication failed" error:
# - Check NEXT_PUBLIC_SUPABASE_ANON_KEY is correct
# - Ensure no extra spaces or line breaks in key
#
# "Database connection failed" error:
# - Verify Supabase project is running (not paused)
# - Check SUPABASE_SERVICE_ROLE_KEY is correct
# - Ensure database migrations have been applied
#
# "Redirect URL mismatch" error:
# - Update NEXT_PUBLIC_APP_URL to match actual deployment URL
# - In Supabase dashboard, add redirect URL to allowed list:
#   Authentication > URL Configuration > Redirect URLs
#
# -----------------------------------------------------------------------------
# Production Deployment (Vercel)
# -----------------------------------------------------------------------------
#
# 1. Go to Vercel project settings
# 2. Navigate to: Settings > Environment Variables
# 3. Add each variable above (excluding comments)
# 4. Set environment scope: Production, Preview, Development
# 5. Use production Supabase credentials (separate project)
# 6. Update NEXT_PUBLIC_APP_URL to production URL
# 7. Save and redeploy
#
# -----------------------------------------------------------------------------
